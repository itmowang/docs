<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>06- Shell脚本学习--其它 | 魔王の个人学习文档站</title>
    <meta name="description" content="记录，学习，体验生活">
    <meta name="generator" content="VitePress v1.0.1">
    <link rel="preload stylesheet" href="/assets/style.C5CBpUzb.css" as="style">
    
    <script type="module" src="/assets/app.NBSvUoZE.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.CI8or701.js">
    <link rel="modulepreload" href="/assets/chunks/theme.BvbT5Gtx.js">
    <link rel="modulepreload" href="/assets/shell_chapter6.md.Clubk0Xf.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-26ff0e52><!--[--><!--]--><!--[--><span tabindex="-1" data-v-ae047c81></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-ae047c81> Skip to content </a><!--]--><!----><header class="VPNav" data-v-26ff0e52 data-v-2e78b0bd><div class="VPNavBar has-sidebar top" data-v-2e78b0bd data-v-3635ac94><div class="wrapper" data-v-3635ac94><div class="container" data-v-3635ac94><div class="title" data-v-3635ac94><div class="VPNavBarTitle has-sidebar" data-v-3635ac94 data-v-31ebd8a5><a class="title" href="/" data-v-31ebd8a5><!--[--><!--]--><!----><span data-v-31ebd8a5>魔王の个人学习文档站</span><!--[--><!--]--></a></div></div><div class="content" data-v-3635ac94><div class="content-body" data-v-3635ac94><!--[--><!--]--><div class="VPNavBarSearch search" data-v-3635ac94><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-3635ac94 data-v-a1a0902d><span id="main-nav-aria-label" class="visually-hidden" data-v-a1a0902d>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-a1a0902d data-v-6c98a3e9><!--[--><span data-v-6c98a3e9>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/shell/index.html" tabindex="0" data-v-a1a0902d data-v-6c98a3e9><!--[--><span data-v-6c98a3e9>Shell</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-a1a0902d data-v-480bceef><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-480bceef><span class="text" data-v-480bceef><!----><span data-v-480bceef>工具类</span><span class="vpi-chevron-down text-icon" data-v-480bceef></span></span></button><div class="menu" data-v-480bceef><div class="VPMenu" data-v-480bceef data-v-5bbee03e><div class="items" data-v-5bbee03e><!--[--><!--[--><div class="VPMenuLink" data-v-5bbee03e data-v-99eed3d0><a class="VPLink link" href="/git/index.html" data-v-99eed3d0><!--[-->Git<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5bbee03e data-v-99eed3d0><a class="VPLink link" href="/markdown/index.html" data-v-99eed3d0><!--[-->Markdown<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-3635ac94 data-v-00c7bf6e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-00c7bf6e data-v-bf12631d data-v-b7343c60><span class="check" data-v-b7343c60><span class="icon" data-v-b7343c60><!--[--><span class="vpi-sun sun" data-v-bf12631d></span><span class="vpi-moon moon" data-v-bf12631d></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-3635ac94 data-v-57cffa2b data-v-f9d82556><!--[--><a class="VPSocialLink no-icon" href="https://github.com/itmowang" aria-label="github" target="_blank" rel="noopener" data-v-f9d82556 data-v-d474e997><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-3635ac94 data-v-4f6096c9 data-v-480bceef><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-480bceef><span class="vpi-more-horizontal icon" data-v-480bceef></span></button><div class="menu" data-v-480bceef><div class="VPMenu" data-v-480bceef data-v-5bbee03e><!----><!--[--><!--[--><!----><div class="group" data-v-4f6096c9><div class="item appearance" data-v-4f6096c9><p class="label" data-v-4f6096c9>Appearance</p><div class="appearance-action" data-v-4f6096c9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-4f6096c9 data-v-bf12631d data-v-b7343c60><span class="check" data-v-b7343c60><span class="icon" data-v-b7343c60><!--[--><span class="vpi-sun sun" data-v-bf12631d></span><span class="vpi-moon moon" data-v-bf12631d></span><!--]--></span></span></button></div></div></div><div class="group" data-v-4f6096c9><div class="item social-links" data-v-4f6096c9><div class="VPSocialLinks social-links-list" data-v-4f6096c9 data-v-f9d82556><!--[--><a class="VPSocialLink no-icon" href="https://github.com/itmowang" aria-label="github" target="_blank" rel="noopener" data-v-f9d82556 data-v-d474e997><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-3635ac94 data-v-ab39859f><span class="container" data-v-ab39859f><span class="top" data-v-ab39859f></span><span class="middle" data-v-ab39859f></span><span class="bottom" data-v-ab39859f></span></span></button></div></div></div></div><div class="divider" data-v-3635ac94><div class="divider-line" data-v-3635ac94></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-26ff0e52 data-v-c25c5dfa><div class="container" data-v-c25c5dfa><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-c25c5dfa><span class="vpi-align-left menu-icon" data-v-c25c5dfa></span><span class="menu-text" data-v-c25c5dfa>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-c25c5dfa data-v-a8d87c8b><button data-v-a8d87c8b>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-26ff0e52 data-v-58e9aab1><div class="curtain" data-v-58e9aab1></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-58e9aab1><span class="visually-hidden" id="sidebar-aria-label" data-v-58e9aab1> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-58e9aab1><section class="VPSidebarItem level-0 has-active" data-v-58e9aab1 data-v-6aa9de18><!----><div class="items" data-v-6aa9de18><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6aa9de18 data-v-6aa9de18><div class="item" data-v-6aa9de18><div class="indicator" data-v-6aa9de18></div><a class="VPLink link link" href="/shell/index.html" data-v-6aa9de18><!--[--><p class="text" data-v-6aa9de18>介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6aa9de18 data-v-6aa9de18><div class="item" data-v-6aa9de18><div class="indicator" data-v-6aa9de18></div><a class="VPLink link link" href="/shell/chapter1.html" data-v-6aa9de18><!--[--><p class="text" data-v-6aa9de18>01- Shell脚本学习-入门</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6aa9de18 data-v-6aa9de18><div class="item" data-v-6aa9de18><div class="indicator" data-v-6aa9de18></div><a class="VPLink link link" href="/shell/chapter2.html" data-v-6aa9de18><!--[--><p class="text" data-v-6aa9de18>02- Shell脚本学习-运算符</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6aa9de18 data-v-6aa9de18><div class="item" data-v-6aa9de18><div class="indicator" data-v-6aa9de18></div><a class="VPLink link link" href="/shell/chapter3.html" data-v-6aa9de18><!--[--><p class="text" data-v-6aa9de18>03- Shell脚本学习-字符串和数组</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6aa9de18 data-v-6aa9de18><div class="item" data-v-6aa9de18><div class="indicator" data-v-6aa9de18></div><a class="VPLink link link" href="/shell/chapter4.html" data-v-6aa9de18><!--[--><p class="text" data-v-6aa9de18>04- Shell脚本学习-条件控制</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6aa9de18 data-v-6aa9de18><div class="item" data-v-6aa9de18><div class="indicator" data-v-6aa9de18></div><a class="VPLink link link" href="/shell/chapter5.html" data-v-6aa9de18><!--[--><p class="text" data-v-6aa9de18>05- Shell脚本学习-函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6aa9de18 data-v-6aa9de18><div class="item" data-v-6aa9de18><div class="indicator" data-v-6aa9de18></div><a class="VPLink link link" href="/shell/chapter6.html" data-v-6aa9de18><!--[--><p class="text" data-v-6aa9de18>06- Shell脚本学习-其它</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-26ff0e52 data-v-33111bc0><div class="VPDoc has-sidebar has-aside" data-v-33111bc0 data-v-9ed3fdf9><!--[--><!--]--><div class="container" data-v-9ed3fdf9><div class="aside" data-v-9ed3fdf9><div class="aside-curtain" data-v-9ed3fdf9></div><div class="aside-container" data-v-9ed3fdf9><div class="aside-content" data-v-9ed3fdf9><div class="VPDocAside" data-v-9ed3fdf9 data-v-db027f93><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-db027f93 data-v-0359ed1b><div class="content" data-v-0359ed1b><div class="outline-marker" data-v-0359ed1b></div><div class="outline-title" role="heading" aria-level="2" data-v-0359ed1b>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-0359ed1b><span class="visually-hidden" id="doc-outline-aria-label" data-v-0359ed1b> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-0359ed1b data-v-e53e7a28><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-db027f93></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-9ed3fdf9><div class="content-container" data-v-9ed3fdf9><!--[--><!--]--><main class="main" data-v-9ed3fdf9><div style="position:relative;" class="vp-doc _shell_chapter6" data-v-9ed3fdf9><div><h1 id="_06-shell脚本学习-其它" tabindex="-1">06- Shell脚本学习--其它 <a class="header-anchor" href="#_06-shell脚本学习-其它" aria-label="Permalink to &quot;06- Shell脚本学习--其它&quot;">​</a></h1><p>标签： Shell</p><hr><p>[TOC]</p><h2 id="shell输入输出重定向" tabindex="-1">Shell输入输出重定向 <a class="header-anchor" href="#shell输入输出重定向" aria-label="Permalink to &quot;Shell输入输出重定向&quot;">​</a></h2><p>Unix 命令默认从标准输入设备(stdin)获取输入，将结果输出到标准输出设备(stdout)显示。一般情况下，标准输入设备就是键盘，标准输出设备就是终端，即显示器。 输出重定向</p><p>命令的输出不仅可以是显示器，还可以很容易的转移向到文件，这被称为输出重定向。</p><p>命令输出重定向的语法为：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">command</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span></span></code></pre></div><p>这样，输出到显示器的内容就可以被重定向到文件。</p><p>例如，下面的命令在显示器上不会看到任何输出：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">who</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> users</span></span></code></pre></div><p>打开 users 文件，可以看到下面的内容：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> users</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">oko</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         tty01</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Sep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 07:30</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ai</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          tty15</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Sep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 13:32</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ruth</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        tty21</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Sep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 10:10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         tty24</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Sep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 13:07</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">steve</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       tty25</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Sep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 13:03</span></span></code></pre></div><p>输出重定向会覆盖文件内容，请看下面的例子：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> line</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> users</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> users</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">line</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span></code></pre></div><p>如果不希望文件内容被覆盖，可以使用 <code>&gt;&gt;</code> 追加到文件末尾，例如：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> line</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> users</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> users</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">line</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">line</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span></code></pre></div><p>输入重定向</p><p>和输出重定向一样，Unix 命令也可以从文件获取输入，语法为：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">command</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span></span></code></pre></div><p>这样，本来需要从键盘获取输入的命令会转移到文件读取内容。</p><p>注意：输出重定向是大于号(&gt;)，输入重定向是小于号(&lt;)。</p><p>例如，计算 users 文件中的行数，可以使用下面的命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> users</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> users</span></span></code></pre></div><p>也可以将输入重定向到 users 文件：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> users</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2</span></span></code></pre></div><p>注意：上面两个例子的结果不同：第一个例子，会输出文件名；第二个不会，因为它仅仅知道从标准输入读取内容。</p><h2 id="重定向深入讲解" tabindex="-1">重定向深入讲解 <a class="header-anchor" href="#重定向深入讲解" aria-label="Permalink to &quot;重定向深入讲解&quot;">​</a></h2><p>一般情况下，每个 Unix/Linux 命令运行时都会打开三个文件：</p><ul><li><strong>标准输入文件(stdin)</strong>：stdin的文件描述符为0，Unix程序默认从stdin读取数据。</li><li><strong>标准输出文件(stdout)</strong>：stdout 的文件描述符为1，Unix程序默认向stdout输出数据。</li><li><strong>标准错误文件(stderr)</strong>：stderr的文件描述符为2，Unix程序会向stderr流中写入错误信息。</li></ul><p>默认情况下，<code>command &gt; file</code> 将 stdout 重定向到 file，<code>command &lt; file</code> 将stdin 重定向到 file。</p><p>如果希望 stderr 重定向到 file，可以这样写：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">command</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span></span></code></pre></div><p>如果希望 stderr 追加到 file 文件末尾，可以这样写：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">command</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span></span></code></pre></div><p>2 表示标准错误文件(stderr)。</p><p>如果希望将 stdout 和 stderr 合并后重定向到 file，可以这样写：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">command</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> 2&gt;&amp;1</span></span></code></pre></div><p>如果希望对 stdin 和 stdout 都重定向，可以这样写：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">command</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">file2</span></span></code></pre></div><p>command 命令将 stdin 重定向到 file1，将 stdout 重定向到 file2。</p><p><strong>全部可用的重定向命令列表：</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">命令</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	说明</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">command</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	将输出重定向到</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file。</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">command</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	将输入重定向到</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file。</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">command</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	将输出以追加的方式重定向到</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	将文件描述符为</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 的文件重定向到</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	将文件描述符为</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 的文件以追加的方式重定向到</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&amp;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	将输出文件</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 和</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 合并。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	将输入文件</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 和</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 合并。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tag</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	将开始标记</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tag</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 和结束标记</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tag</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 之间的内容作为输入。</span></span></code></pre></div><h2 id="here-document" tabindex="-1">Here Document <a class="header-anchor" href="#here-document" aria-label="Permalink to &quot;Here Document&quot;">​</a></h2><p>Here Document 目前没有统一的翻译，这里暂译为<code>嵌入文档</code>。Here Document 是 Shell 中的一种特殊的重定向方式，它的基本的形式如下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">command</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> delimiter</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    document</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">delimiter</span></span></code></pre></div><p>它的作用是将两个 delimiter 之间的内容(document) 作为输入传递给 command。</p><p>注意： <strong>结尾的delimiter 一定要顶格写</strong>，前面不能有任何字符，后面也不能有任何字符，包括空格和 tab 缩进。</p><p>开始的delimiter前后的空格会被忽略掉。</p><p>下面的例子，通过 <code>wc -l</code> 命令计算 document 的行数：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EOF</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    This is a simple lookup program</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    for good (and bad) restaurants</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    in Cape Town.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span></code></pre></div><p>输出： 3</p><p>也可以 将 Here Document 用在脚本中，例如：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EOF</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">This is a simple lookup program</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for good (and bad) restaurants</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">in Cape Town.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span></code></pre></div><p>运行结果：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>This is a simple lookup program</span></span>
<span class="line"><span>for good (and bad) restaurants</span></span>
<span class="line"><span>in Cape Town.</span></span></code></pre></div><h2 id="dev-null-文件" tabindex="-1">/dev/null 文件 <a class="header-anchor" href="#dev-null-文件" aria-label="Permalink to &quot;/dev/null 文件&quot;">​</a></h2><p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 <code>/dev/null</code>：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">command</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/null</span></span></code></pre></div><p><code>/dev/null</code> 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。但是 <code>/dev/null</code> 文件非常有用，将命令的输出重定向到它，会起到<code>禁止输出</code>的效果。</p><p>如果希望屏蔽 stdout 和 stderr，可以这样写：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">command</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> 2&gt;&amp;1</span></span></code></pre></div><p>这样不会在屏幕打印任何信息。</p><h2 id="shell文件包含" tabindex="-1">Shell文件包含 <a class="header-anchor" href="#shell文件包含" aria-label="Permalink to &quot;Shell文件包含&quot;">​</a></h2><p>像其他语言一样，Shell 也可以包含外部脚本，将外部脚本的内容合并到当前脚本。</p><p>Shell 中包含脚本可以使用 <code>. filename</code> 或 <code>source filename</code> 。</p><p>两种方式的效果相同，简单起见，一般使用点号(.)，但是注意点号(.)和文件名中间有一空格。</p><p>示例： 被包含文件：sub.sh</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>name=&quot;yjc&quot;</span></span></code></pre></div><p>主文件：test.sh</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./sub.sh</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $name</span></span></code></pre></div><p>运行结果：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>yjc</span></span></code></pre></div><h2 id="获取当前正在执行脚本的绝对路径" tabindex="-1">获取当前正在执行脚本的绝对路径 <a class="header-anchor" href="#获取当前正在执行脚本的绝对路径" aria-label="Permalink to &quot;获取当前正在执行脚本的绝对路径&quot;">​</a></h2><p>正确的命令是：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">basepath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dirname</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> $0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pwd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span></span></code></pre></div><p>直接使用<code>pwd</code>或者<code>dirname $0</code>是不对的。</p><h2 id="按特定字符串截取字符串" tabindex="-1">按特定字符串截取字符串 <a class="header-anchor" href="#按特定字符串截取字符串" aria-label="Permalink to &quot;按特定字符串截取字符串&quot;">​</a></h2><p>示例：截取<code>/www/html/php/myapp/</code>里的myapp。</p><p>方案：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/www/html/php/myapp/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s#/# #g&#39;)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b_len</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">expr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ${</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">#</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[*]} - </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">${b[$b_len]}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $app_name</span></span></code></pre></div><p>这里利用<code>sed</code>将字符串按指定字符截成数组，然后取最后一个。</p><p>计算数组长度：<code>${#arr[*]}</code><br> 计算则需要使用<code>expr</code>命令</p><h2 id="awk" tabindex="-1">awk <a class="header-anchor" href="#awk" aria-label="Permalink to &quot;awk&quot;">​</a></h2><h3 id="awk简介" tabindex="-1">awk简介 <a class="header-anchor" href="#awk简介" aria-label="Permalink to &quot;awk简介&quot;">​</a></h3><p>awk是一个强大的文本分析工具，相对于grep的查找，sed的编辑，awk在其对数据分析并生成报告时，显得尤为强大。简单来说awk就是把文件(或其他方式的输入流, 如重定向输入)逐行的读入（看作一个记录集）, 把每一行看作一条记录，以空格(或\t,或用户自己指定的分隔符)为默认分隔符将每行切片（类似字段），切开的部分再进行各种分析处理。</p><p>awk有3个不同版本: awk、nawk和gawk，未作特别说明，一般指gawk，gawk 是 AWK 的 GNU 版本。</p><p>Awk基本语法:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;pattern1 {command1;command 2…; command 3}  pattern2 { command …}&#39;</span></span></code></pre></div><p>pattern表示用来过滤记录的模式,可是是正则表达式，关系运算表达式，也可以什么也没有(表示选中所有记录)。</p><p>每个pattern选中的行记录会被花括号括起来的命令command操作一遍, command之间用<code>;</code>分割。 花括号里面可以什么也没有, 则默认为print输出整行记录。 Comamnd可以是输出， 可以是算术运算，逻辑运算，循环控制等等。</p><h3 id="示例" tabindex="-1">示例 <a class="header-anchor" href="#示例" aria-label="Permalink to &quot;示例&quot;">​</a></h3><p>s.txt</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>zhangsan 1977 male computer 83</span></span>
<span class="line"><span>lisi 1989 male math 99</span></span>
<span class="line"><span>wanglijiang 1990 female chinese 78</span></span>
<span class="line"><span>xuliang 1977 male economic 89</span></span>
<span class="line"><span>xuxin 1986 female english 99</span></span>
<span class="line"><span>wangxuebing 1978 male math 89</span></span>
<span class="line"><span>lichang 1989 male math 99</span></span>
<span class="line"><span>wanglijiang 1990 female chinese 78</span></span>
<span class="line"><span>zhangsansan 1977 male computer 83 </span></span>
<span class="line"><span>langxuebing 1978 male math 89</span></span>
<span class="line"><span>lisibao 1989 male math 99</span></span>
<span class="line"><span>xiaobao 1990 female chinese 78</span></span></code></pre></div><p>一行中的5个字段分别表示<code>姓名, 出生年, 性别,科目,分数</code>, 是一个很传统很典型的报表文件。</p><p>现在演示awk是如何查找的：</p><p>1)直接输出1990年出生的同学:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/1990/&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s.txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wanglijiang</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1990</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> female</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chinese</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 78</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wanglijiang</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1990</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> female</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chinese</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 78</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xiaobao</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1990</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> female</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chinese</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 78</span></span></code></pre></div><p>或者：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>$ awk &#39;/1990/{print $0}&#39; s.txt</span></span></code></pre></div><p>awk默认把输入的内容以空格拆分出每列。<code>$0</code>表示匹配所有列，<code>print $0</code>将输出所有列，每列分隔符是空格。</p><p>2）对chinese的课程的行输出&quot;语文&quot;：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/chinese/{print &quot;语文&quot;}&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s.txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">语文</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">语文</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">语文</span></span></code></pre></div><p>3）记录的头部和结尾加上一段说明：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;BEGIN{print &quot;Result of the quiz:\n&quot;}{print $0}END{print &quot;------&quot;}&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s.txt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> quiz:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">zhangsan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1977</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> male</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> computer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 83</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lisi</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1989</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> male</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> math</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 99</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wanglijiang</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1990</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> female</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chinese</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 78</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xuliang</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1977</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> male</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> economic</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 89</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xuxin</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1986</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> female</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> english</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 99</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wangxuebing</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1978</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> male</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> math</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 89</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lichang</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1989</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> male</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> math</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 99</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wanglijiang</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1990</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> female</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chinese</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 78</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">zhangsansan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1977</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> male</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> computer</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 83</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">langxuebing</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1978</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> male</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> math</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 89</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lisibao</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1989</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> male</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> math</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 99</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xiaobao</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1990</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> female</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chinese</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 78</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">------</span></span></code></pre></div><p>AWK工作流程：<strong>逐行扫描文件，从第一行到最后一行，寻找匹配特定模式的行，并在这些行上进行用户想要到的操作</strong>。</p><p>BEGIN只会在最开始执行；END只会在扫描所有行数之后执行。BEGIN和END之间的花括号的内容每扫描一行都会执行。</p><p>4)查找女生的成绩且只输出姓名、学科、成绩：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;$3==&quot;female&quot;{print $1,$4,$5}&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s.txt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wanglijiang</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chinese</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 78</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xuxin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> english</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 99</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wanglijiang</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chinese</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 78</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xiaobao</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chinese</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 78</span></span></code></pre></div><p><code>$1</code>表示第1列，<code>$n</code>类推。这里条件是表达式，而不是正则。print里<code>,</code>表示空格分隔符。</p><p>5)找出1990年出生的学生姓名，并要求匹配正则:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;$2~/1990/{print $1}&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s.txt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wanglijiang</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wanglijiang</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xiaobao</span></span></code></pre></div><p>这里<code>~</code>表示匹配正则表达式。<code>!~</code>表示不匹配正则表达式。</p><p>如果需要多选，则改成：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> awk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;$2~/(1990|1991)/{print $1}&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s.txt</span></span></code></pre></div><p>awk更多内容详见：<a href="https://www.cnblogs.com/52fhy/p/5836429.html#autoid-3-4-0" target="_blank" rel="noreferrer">https://www.cnblogs.com/52fhy/p/5836429.html#autoid-3-4-0</a></p><p>（完结）</p></div></div></main><footer class="VPDocFooter" data-v-9ed3fdf9 data-v-e03bb7bc><!--[--><!--]--><!----><nav class="prev-next" data-v-e03bb7bc><div class="pager" data-v-e03bb7bc><a class="VPLink link pager-link prev" href="/shell/chapter5.html" data-v-e03bb7bc><!--[--><span class="desc" data-v-e03bb7bc>Previous page</span><span class="title" data-v-e03bb7bc>05- Shell脚本学习-函数</span><!--]--></a></div><div class="pager" data-v-e03bb7bc><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"Ih4sfuJp\",\"api-examples.md\":\"BUCwiEfG\",\"shell_index.md\":\"jvc7-b6n\",\"markdown_index.md\":\"cYhDuUvy\",\"markdown_chapter1.md\":\"Jc8adyhQ\",\"git_index.md\":\"DUxESQAK\",\"markdown-examples.md\":\"DYLFRYaf\",\"shell_chapter4.md\":\"Clwhy06z\",\"shell_chapter3.md\":\"JiclKOFy\",\"shell_chapter5.md\":\"Dug5Zv4h\",\"shell_chapter6.md\":\"Clubk0Xf\",\"shell_chapter1.md\":\"BRiT20vN\",\"git_chapter1.md\":\"CNbulCx3\",\"shell_chapter2.md\":\"DFUdKSav\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"魔王の个人学习文档站\",\"description\":\"记录，学习，体验生活\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"Shell\",\"link\":\"/shell/index\"},{\"text\":\"工具类\",\"items\":[{\"text\":\"Git\",\"link\":\"/git/index\"},{\"text\":\"Markdown\",\"link\":\"/markdown/index\"}]}],\"sidebar\":{\"/shell\":{\"base\":\"\",\"items\":[{\"items\":[{\"text\":\"介绍\",\"link\":\"/shell/index\"},{\"text\":\"01- Shell脚本学习-入门\",\"link\":\"/shell/chapter1\"},{\"text\":\"02- Shell脚本学习-运算符\",\"link\":\"/shell/chapter2\"},{\"text\":\"03- Shell脚本学习-字符串和数组\",\"link\":\"/shell/chapter3\"},{\"text\":\"04- Shell脚本学习-条件控制\",\"link\":\"/shell/chapter4\"},{\"text\":\"05- Shell脚本学习-函数\",\"link\":\"/shell/chapter5\"},{\"text\":\"06- Shell脚本学习-其它\",\"link\":\"/shell/chapter6\"}]}]},\"/git\":{\"base\":\"\",\"items\":[{\"items\":[{\"text\":\"介绍\",\"link\":\"/git/index\"},{\"text\":\"常用 Git 命令清单\",\"link\":\"/git/chapter1\"}]}]},\"/markdown\":{\"base\":\"\",\"items\":[{\"items\":[{\"text\":\"介绍\",\"link\":\"/markdown/index\"},{\"text\":\"Markdown 语法\",\"link\":\"/markdown/chapter1\"}]}]}},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/itmowang\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>